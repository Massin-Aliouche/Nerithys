@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens (CSS variables) */
:root{
  --bg: #f6fbfc; /* light watery background for editorial panels */
  --surface: #ffffff;
  --muted-surface: #f1f5f9;
  --ink: #0f1724;
  --muted: #64748b;
  --accent: #2bb6a4; /* primary aquamarine */
  --accent-2: #7c5cff; /* secondary accent for contrast */
  --container: 1100px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 18px;
  --shadow-soft: 0 6px 20px rgba(11,18,32,0.08);
}

@layer base {
  *, *::before, *::after { box-sizing: border-box }
  html, body { height: 100% }
  body {
    color: var(--ink);
    font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background: linear-gradient(180deg, #f8fafc 0%, var(--bg) 100%);
  }
  a { color: inherit }
}

@layer components {
  .site-container { max-width: var(--container); margin: 0 auto; padding: 1rem }
  .brand { font-size: 1.125rem; font-weight: 600; letter-spacing: -0.01em; color: var(--ink) }
  .logo-baseline { color: var(--muted); font-size:0.78rem; margin-top:2px }
  .site-header { padding: 1.5rem 0; background: transparent }
  .nav-list { display: none; gap: 1rem; align-items: center }
  @media (min-width: 768px) { .nav-list { display: flex } }
  .nav-link { font-size: 0.95rem; padding: 0.35rem 0.6rem; border-radius: 8px; color: var(--muted); text-decoration: none }
  .nav-link:hover { color: var(--ink) }
  .btn-primary { display: inline-flex; align-items: center; gap: 0.6rem; color: #fff; padding: 0.7rem 1.3rem; border-radius: 14px; background-color: var(--accent); box-shadow: 0 6px 18px rgba(43,182,164,0.14); font-weight:600 }
  .card-ui { background: var(--surface); border-radius: var(--radius-lg); padding: 1.25rem; box-shadow: var(--shadow-soft); border: 1px solid rgba(2,6,23,0.03) }
  .card-ui { position: relative; overflow: hidden }
  .card-ui::after { content: ""; position: absolute; inset: 0; pointer-events: none; background: linear-gradient(180deg, rgba(2,6,23,0.00) 0%, rgba(2,6,23,0.04) 60%); opacity: 0; transition: opacity .22s ease; }
  .card-ui:hover::after { opacity: 1 }
  .hero-panel { text-align: center; padding: 7rem 0 }
  .hero-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; line-height: 1.04; font-weight: 700; color: var(--ink); letter-spacing: -0.01em }
  @media (min-width: 768px) { .hero-title { font-size: 3rem } }
  .hero-sub { font-size: 0.98rem; max-width: 70ch; margin: 1.1rem auto 0; color: var(--muted) }
  .search-input { width: 100%; border: 1px solid rgba(15,23,36,0.06); border-radius: 10px; padding: 0.6rem 0.9rem }
  .search-input:focus { outline: none; box-shadow: 0 0 0 4px rgba(43,182,164,0.12) }
  .badge { display:inline-block; font-size: 0.78rem; padding: 0.14rem 0.45rem; border-radius: 999px; background-color: rgba(15,23,36,0.04); color: rgba(15,23,36,0.54) }
  .prose-limited { max-width: 70ch }

  /* subtle logo animation */
  header img.logo-subtle { animation: logoPulse 6s ease-in-out infinite; transform-origin:center }
  @keyframes logoPulse { 0%{ transform: scale(1) } 50%{ transform: scale(1.02) } 100%{ transform: scale(1) } }
}

/* Micro animations and hover effects */
@layer utilities {
  .card-ui img { transition: transform .32s cubic-bezier(.2,.9,.3,1); will-change: transform; display:block; width:100%; height:16rem; object-fit:cover }
  .card-ui:hover img { transform: scale(1.02); }
  .card-ui:hover { transform: translateY(-8px); transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s; box-shadow: 0 18px 50px rgba(2,6,23,0.14); z-index:5 }
  .card-ui .img-overlay { position:absolute; inset:0; pointer-events:none; background: linear-gradient(180deg, rgba(0,0,0,0.0) 0%, rgba(0,0,0,0.08) 60%); opacity:0; transition:opacity .25s ease }
  .card-ui:hover .img-overlay { opacity:1 }
  .fade-up { animation: fadeUp .5s ease both; }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(8px) } to { opacity:1; transform: translateY(0) } }
}

/* Hero background and signature */
.hero-bg { position:absolute; inset:0; z-index:0; overflow:hidden }
.hero-bg img { width:120%; height:120%; object-fit:cover; transform:scale(1.06); filter: blur(10px) saturate(1.02); opacity:0.7 }
.hero-content { position:relative; z-index:10 }
.hero-signature { font-family: 'Playfair Display', serif; font-weight:600; color:var(--accent-2); margin-top:0.75rem; font-size:1rem }

/* Subtle aquascape texture & thin wave overlay for premium impact */
.hero-panel { position: relative; overflow: hidden }
.hero-panel::before { content:""; position:absolute; inset:0; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800"><filter id="g"><feTurbulence baseFrequency="0.8" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23g)" opacity="0.04" fill="white"/></svg>'); opacity:0.65; mix-blend-mode:overlay; pointer-events:none }
.hero-panel::after { content:""; position:absolute; left:0; right:0; bottom:0; height:36%; background-image: radial-gradient(ellipse at center, rgba(255,255,255,0.04), rgba(255,255,255,0) 60%); pointer-events:none }

/* Alternate section background */
.section-alt { background: linear-gradient(180deg, rgba(11,18,32,0.02), rgba(255,255,255,0)); }

/* Apply subtle alternation automatically for rhythm: every second section inside main */
main > section:nth-child(even) { background: rgba(11,18,32,0.02); padding-top: 2rem; padding-bottom:2rem }
main > section:nth-child(odd) { background: transparent }

/* Stronger params block and a small summary box for fiche */
.fiche-params { background: rgba(255,255,255,0.85); border:1px solid rgba(2,6,23,0.04); padding:0.85rem; border-radius:12px; box-shadow: 0 8px 30px rgba(11,18,32,0.04) }
.summary-box { background: linear-gradient(90deg, rgba(43,182,164,0.04), rgba(124,92,255,0.02)); padding:0.9rem 1rem; border-radius:10px; border-left:3px solid var(--accent); font-weight:600; margin-bottom:0.5rem }
.param { display:flex; gap:0.6rem; align-items:center; background:transparent; padding:0.45rem 0.6rem; border-radius:8px }
.param .icon { width:20px; height:20px; flex:0 0 20px; display:inline-flex; align-items:center; justify-content:center }
/* Increase contrast of fiche params block and spacing */
.fiche-params { background: rgba(15,23,36,0.03); border:1px solid rgba(2,6,23,0.06); padding:1rem; }
.prose-limited { max-width: 68ch }

/* Slightly larger vertical rhythm */
main .section { margin-top: 1.2rem; margin-bottom: 1.2rem }

/* Footer padding + subtle divider */
footer { padding-top: 1.25rem; padding-bottom: 1.25rem }
footer { border-top: 1px solid rgba(2,6,23,0.06) }

/* reveal on scroll */
.reveal { opacity:0; transform: translateY(8px); transition: opacity .48s ease, transform .48s cubic-bezier(.2,.9,.3,1) }
.reveal.is-visible { opacity:1; transform: translateY(0) }

/* Takeaway box on fiche */
.takeaway { background: linear-gradient(90deg, rgba(43,182,164,0.06), rgba(124,92,255,0.03)); border-left:4px solid var(--accent); padding:0.85rem; border-radius:10px; font-weight:600 }
.params-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:0.75rem }
.param { display:flex; gap:0.6rem; align-items:center; background:var(--muted-surface); padding:0.5rem 0.75rem; border-radius:10px }
.param svg { width:18px; height:18px; flex:0 0 18px }

/* Lightbox */
.lightbox { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(2,6,23,0.6); opacity:0; pointer-events:none; transition:opacity .18s ease }
.lightbox.open { opacity:1; pointer-events:auto }
.lightbox .inner { position:relative; max-width:90vw; max-height:90vh }
.lightbox img { max-width:100%; max-height:80vh; border-radius:8px; box-shadow:0 12px 40px rgba(2,6,23,0.6); transform-origin:center; animation:zoomIn .28s ease both }
.lightbox .close { position:absolute; top:-10px; right:-10px; background:var(--surface); border-radius:8px; padding:6px; box-shadow:var(--shadow-soft); cursor:pointer }
.lightbox .count { position:absolute; bottom:-28px; right:8px; color:var(--muted); font-size:12px }
@keyframes zoomIn { from { opacity:0; transform:scale(.96) } to { opacity:1; transform:scale(1) } }

/* Difficulty visual */
.difficulty { display:flex; gap:0.25rem; align-items:center }
.difficulty .dot { width:8px; height:8px; border-radius:999px; background:var(--muted-surface); box-shadow: inset 0 -1px 0 rgba(0,0,0,0.04) }
.difficulty .dot.filled { background:var(--accent) }


@media (max-width:720px){
  .badge{ font-size:0.75rem }
  .card-ui { padding:0.9rem }
  .hero-title{ font-size:1.6rem }
}

/* Additional mobile spacing tweaks */
@media (max-width:720px){
  .hero-panel { padding-top:3.25rem; padding-bottom:3.25rem }
  .card-ui { padding:1.1rem }
  .btn-primary { padding: 0.6rem 1.05rem }
}

/* Dark theme overrides */
.dark body { background: linear-gradient(180deg, #071422 0%, #04121a 100%); color: #e6eef0 }
.dark :root{ --bg: #04121a; --surface:#071826; --muted-surface:#072a2c; --ink:#e6eef0; --muted:#9fb3b6 }
.dark .card-ui { background: var(--surface); box-shadow: 0 8px 30px rgba(0,0,0,0.5) }
.dark .bg-accent { background-color: #1f8f7b }

/* Theme toggle visuals */
.theme-toggle { display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; border-radius:8px; transition:transform .18s ease, background-color .18s }
.theme-toggle svg { width:18px; height:18px; transition:transform .2s ease, opacity .18s }
.theme-toggle .sun { transform-origin:center; }
.theme-toggle .moon { transform-origin:center; }
.theme-toggle--dark .sun { transform: rotate(-20deg) scale(.6); opacity:0.2 }
.theme-toggle--dark .moon { transform: rotate(0deg) scale(1); opacity:1 }
.theme-toggle--light .sun { transform: rotate(0deg) scale(1); opacity:1 }
.theme-toggle--light .moon { transform: rotate(20deg) scale(.6); opacity:0.2 }

/* Utility aliases for colors mapped to Tailwind theme */
.bg-accent { background-color: var(--accent) }
.text-ink { color: var(--ink) }
.text-muted { color: var(--muted) }
.bg-muted-surface { background-color: var(--muted-surface) }

@media (max-width: 720px) {
  .nav-list { display: none }
  .hero-title { font-size: 1.6rem }
}
